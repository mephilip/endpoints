function addCommas(t){t+="";for(var a=t.split("."),e=a[0],i=a.length>1?"."+a[1]:"",n=/(\d+)(\d{3})/;n.test(e);)e=e.replace(n,"$1,$2");return e+i}!function($){if($("#main_chart")){var t=$(".state-abbrev").data("stateabbrev");$.getJSON(Variables.home_url+"/wp-json/reviews/v1/fetch/state/"+t,function(t){console.log(t);var a=t.avg_annual_premium,e=t.city_data,i=[],n=[];$(t.city_data).each(function(){i.push(this.city),n.push(parseInt(this.avg_annual_premium))});var s=Math.min.apply(Math,n),r=t.state_name;Highcharts.setOptions({lang:{thousandsSep:","}}),$("#main_chart").highcharts({chart:{type:"bar"},title:{text:""},xAxis:{categories:i},yAxis:{min:s-200,title:{text:" ",align:"high"},plotLines:[{color:"red",value:a,width:"2",zIndex:4,label:{useHTML:!0,rotation:0,text:r+" Average Yearly Rate<br><b>$"+addCommas(a)+"</b>",x:5,align:"left"}}]},tooltip:{pointFormat:"{series.name}<b>${point.y}</b>"},legend:{enabled:!1},exporting:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{pointWidth:20}},series:[{name:" ",color:"#00ADEF",data:n}]})})}$(".graph").each(function(){$(this).find(".graph").each(function(){var t=Math.round($(this).data("value")/$(this).data("max")*100);$(this).hasClass("bar")?$(this).width(t+"%"):$(this).height(t+"%")})}),$(".quote-form form").bind("submit",function(t){t.preventDefault();var a=$(this).find("#zip-code").val(),e=$(this).find("#quote-error"),i=$("#modal-results"),n=/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(a),s=$(this).parent().data("label");if(n){MediaAlphaExchange={type:"ad_unit",ua_class:"auto",placement_id:"1hgKepAMZvEu7EDq3BG99P6AI-4CbQ",version:"17",sub_1:Variables.current_url,sub_2:s,data:{zip:a,currently_insured:"1",current_company:"other",drivers:[{sr_22:"0"}]}},i.html("Loading ..."),e.css("display","none"),MediaAlphaExchange__load("modal-results"),$("#modal").foundation("reveal","open");var r=function(){i.has("div").length||i.html("Nothing found, try again.")};setTimeout(r,1e3)}else e.css("display","inline-block"),$(document).foundation("equalizer","reflow")})}(jQuery);